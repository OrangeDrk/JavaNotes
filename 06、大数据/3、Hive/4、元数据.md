[TOC]

# å…ƒæ•°æ®

1. åœ¨Hiveä¸­ï¼šdatabaseåï¼Œtableåï¼Œå­—æ®µåï¼Œåˆ†åŒºåï¼Œç´¢å¼•åï¼Œè§†å›¾åç­‰è¿™äº›éƒ½æ˜¯==å…ƒæ•°æ®==ï¼ˆæè¿°å…¶ä»–æ•°æ®çš„æ•°æ®ï¼‰
2. åœ¨Hiveä¸­ï¼Œå…ƒæ•°æ®æ˜¯å­˜å‚¨åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ã€‚ç›®å‰ä¸ºæ­¢ï¼ŒHiveçš„å…ƒæ•°æ®çš„æ•°æ®åº“åªæ”¯æŒDerByå’ŒMySQLï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ä½¿ç”¨Hiveä¸­è‡ªå¸¦çš„DerBy
3. DerByæ˜¯å•è¿æ¥æ•°æ®åº“ï¼Œä¸ç¬¦åˆå¤§æ•°æ®çš„å¹¶å‘åœºæ™¯ï¼Œæ‰€ä»¥éœ€è¦å°†DerByæ”¹ä¸ºMySQL



# æ›´æ¢Hiveæ•°æ®åº“

## MySQLçš„å®‰è£…

### å¦‚æœå·²ç»å®‰è£…MySQL

1. ç¼–è¾‘`my.cnf`

   ```sh
   vim /usr/my.cnf
   
   # æ·»åŠ å¦‚ä¸‹å†…å®¹
   [client]
   default-character-set=utf8
   [mysql]
   default-character-set=utf8
   [mysqld]
   character_set_server=utf8
   sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
   ```

2. é‡å¯MySQLï¼š`service mysql restart`



### å…¨æ–°å®‰è£…

1. æŸ¥çœ‹æ˜¯å¦æœ‰æ®‹ç¼ºçš„MySQL

   ```sh
   rpm -qa | grep mysql
   ```

2. åˆ é™¤æ®‹ç¼ºçš„MySQL

   ```sh
   rpm -ev --nodeps mysql-libs-5.1.73-8.el6_8.x86_64
   rpm -ev --nodeps tcl-mysqltcl-3.052-1.el6.x86_64
   ....
   ```

3. æ–°æ·»MySQLç”¨æˆ·å’Œç”¨æˆ·ç»„

   ```sh
   groupadd mysql
   useradd -r -g mysql mysql
   ```

4. ä¸‹è½½MySQLå®‰è£…åŒ…

   ```sh
   cd /home/software
   wget http://bj-yzjd.ufile.cn-north-02.ucloud.cn/MySQL-client-5.6.29-1.linux_glibc2.5.x86_64.rpm
   wget http://bj-yzjd.ufile.cn-north-02.ucloud.cn/MySQL-server-5.6.29-1.linux_glibc2.5.x86_64.rpm
   ```

5. å®‰è£…MySQL

   ```sh
   rpm -ivh MySQL-server-5.6.29-1.linux_glibc2.5.x86_64.rpm 
   rpm -ivh MySQL-client-5.6.29-1.linux_glibc2.5.x86_64.rpm 
   ```

6. ç¼–è¾‘`my.cnf`

   ```sh
   vim /usr/my.cnf
   
   # æ·»åŠ å¦‚ä¸‹å†…å®¹
   [client]
   default-character-set=utf8
   [mysql]
   default-character-set=utf8
   [mysqld]
   character_set_server=utf8
   sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
   ```

7. æ·»åŠ åˆ°å¼€æœºå¯åŠ¨

   ```sh
   cp /usr/share/mysql/mysql.server /etc/init.d/mysql
   ```

8. é‡å¯MySQL

   ```sh
   service mysql restart
   ```

9. æŸ¥çœ‹MySQLçš„å¯†ç 

   ```sh
   cat /root/.mysql_secret
   ```

10. ä¿®æ”¹å¯†ç 

    ```sh
    mysqladmin -u root -p password root
    ```





> å¦‚æœä¹‹å‰å®‰è£…è¿‡MySQLï¼Œéœ€è¦åˆ é™¤æ„Ÿè§‰æ‰èƒ½é‡æ–°å®‰è£…

`rpm qa | grep mysql`---å¦‚æœå‡ºç°ç»“æœï¼Œåˆ é™¤ï¼š`rpm -ev --nodeps xxx`

`rpm qa | grep MySQL`---å¦‚æœå‡ºç°ç»“æœï¼Œåˆ é™¤

æ£€æŸ¥ä»¥ä¸‹ç›®å½•ä¸­æ˜¯å¦æœ‰å’ŒMySQLç›¸å…³çš„å†…å®¹ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ç§»é™¤æ‰

```sh
rm -rf * /usr/bin/mysql*
rm -rf * /usr/sbin/mysql*
rm -rf * /var/lib/mysql*
rm -rf * /usr/share/info/mysql*
rm -rf * /usr/share/man/mysql*
rm -rf * /usr/include/mysql*
rm -rf * /usr/lib/mysql*
rm -rf * /usr/share/mysql*
rm -rf /root/.mysql_secret
```

å…¨éƒ¨ç§»é™¤ä¹‹åï¼Œé‡æ–°å®‰è£…MySQL



## Hiveçš„MySQLé…ç½®

1. ä¸‹è½½MySQLçš„é©±åŠ¨åŒ…

   ```sh
   cd /home/software/apache-hive-1.2.0-bin/lib
   wget http://bj-yzjd.ufile.cn-north-02.ucloud.cn/mysql-connector-java-5.1.38-bin.jar
   ```

2. åœ¨Hiveçš„confç›®å½•ä¸‹ï¼Œæ–°å»ºå¹¶ç¼–è¾‘`hive-site.xml`

   ```xml
   <configuration>
       <property>
           <name>javax.jdo.option.ConnectionURL</name>
           <value>jdbc:mysql://hadoop01:3306/hive?createDatabaseIfNotExist=true</value>
       </property>
       <property>
           <name>javax.jdo.option.ConnectionDriverName</name>
           <value>com.mysql.jdbc.Driver</value>
       </property>
       <property>
           <name>javax.jdo.option.ConnectionUserName</name>
           <value>root</value>
       </property>
       <property>
           <name>javax.jdo.option.ConnectionPassword</name>
           <value>root</value>
       </property>
   </configuration>
   ```

3. è¿›å…¥MySQLï¼Œæ‰§è¡Œä»¥ä¸‹è¯­å¥

   ```mysql
   grant all privileges on *.* to 'root'@'hadoop01' identified by 'root' with grant option;
   
   grant all on *.* to 'root'@'%' identified by 'root';
   
   flush privileges;
   
   create database hive character set latin1;
   ```

4. è¿›å…¥Hiveçš„binç›®å½•ï¼Œå¯åŠ¨Hive

   ```sh
   sh hive
   ```

5. ç™»å½•MySQLï¼ŒæŸ¥çœ‹mysqlçš„hiveæ•°æ®åº“:`use hive`

   ![](https://gitee.com/sxhDrk/images/raw/master/imgs/MySQLä¸­çš„Hiveå…ƒæ•°æ®.png)



> å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œä»ç¬¬ä¸‰ä¸ªé”™è¯¯å¼€å§‹çœ‹ï¼Œå‡ºç°ï¼š`READ COMMITTED or READ UNCOMMITTED`ï¼Œè§£å†³æ–¹æ¡ˆğŸ‘‡ğŸ‘‡

1. `vim /usr/my.cnf`
2. æ·»åŠ ï¼š`binlog_format=mixed`
3. é‡å¯MySQLï¼š`service mysql restart`